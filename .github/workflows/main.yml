on:
 pull_request:
   branches: 
     - master
jobs:
  CASTOR_validation:
    runs-on: ubuntu-latest
    name: CASTOR validation 
    env:
      n_events: ${{ 200000 }}
    steps:
      # To use this repository's private action, you must check out the repository, v2 is part of the action name
      - name: Checkout
        #uses: actions/checkout@v2
        run: |
          pwd
          ls -l
          #  (could use checkout action instead)
          git clone git://github.com/katilp/CastorDataValidation.git workdir
          cd workdir
          chmod +x commands.sh
          ls -l

      - name: In the container action step
        id: inspect
        run: | 
          pwd
          ls -l 
          docker run -v $(pwd):/mountedvolume -w /home/cmsusr gitlab-registry.cern.ch/clange/cmssw-docker/cmssw_4_2_8_lowpupatch1 /bin/bash /mountedvolume/workdir/commands.sh n_events

      - name: Upload artifact
        uses: actions/upload-artifact@v2
        with:
          name: output
          path: outputs/       
      
